<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Orcado Fish</title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

<style>
/* ---------------- GLOBAL ---------------- */
body {
    margin: 0;
    font-family: 'Roboto', sans-serif;
    background: linear-gradient(to bottom, #b3e5fc, #81d4fa);
    color: #333;
}
a { text-decoration: none; color: inherit; }

/* ---------------- NAVBAR ---------------- */
nav {
    display: flex;
    justify-content: center;
    background: #007BFF;
    padding: 15px 0;
    position: sticky;
    top: 0;
    z-index: 100;
}
nav a {
    margin: 0 20px;
    color: white;
    font-weight: bold;
}
nav a:hover { color: #00CFFF; }

/* ---------------- HERO ---------------- */
header {
    text-align: center;
    padding: 80px 20px 60px;
    background: linear-gradient(135deg, #00cfff, #007bff);
    color: white;
}
header .logo {
    width: 130px;
}
header h1 { font-size: 2.5rem; }
header p { font-size: 1.2rem; }

/* ---------------- CONTAINER ---------------- */
.container {
    background: rgba(255,255,255,0.95);
    padding: 40px 30px;
    max-width: 600px;
    margin: 40px auto;
    border-radius: 15px;
    box-shadow: 0 8px 25px rgba(0,123,255,0.2);
}

label { font-weight: bold; display: block; margin-top: 15px; }
input, select, button {
    width: 100%;
    padding: 12px;
    margin-top: 5px;
    border-radius: 8px;
    border: 1px solid #ccc;
}

button.submit-btn {
    margin-top: 20px;
    background: linear-gradient(45deg, #007BFF, #00CFFF);
    color: white;
    font-weight: bold;
    border-radius: 25px;
    border: none;
    cursor: pointer;
}

#status { text-align: center; margin-top: 15px; font-weight: bold; }

/* ---------------- TABLE ---------------- */
#boatTable {
    width: 95%;
    max-width: 1000px;
    margin: 30px auto 50px;
    border-collapse: collapse;
    background: white;
}
#boatTable th, #boatTable td {
    padding: 10px;
    border-bottom: 1px solid #ddd;
    text-align: center;
}
#boatTable th {
    background: #007BFF;
    color: white;
}
#boatTable tr:nth-child(even) {
    background: #f2f2f2;
}
</style>
</head>

<body>

<!-- NAVIGATION -->
<nav>
    <a onclick="showPage('home')">Home</a>
    <a onclick="showPage('addBoat')">Add Boat</a>
    <a onclick="showPage('viewBoats')">View Boats</a>
</nav>

<!-- HOME -->
<div id="home" class="page">
    <header>
        <img src="logo.png" class="logo" alt="Orcado Fish Logo">
        <h1>Orcado Fish</h1>
        <p>Manage Your Boats Effortlessly</p>
    </header>
</div>

<!-- ADD BOAT -->
<div id="addBoat" class="page" style="display:none;">
    <div class="container">
        <h2>Boat Submission Form</h2>
        <form id="boatForm">
            <label>Boat Name</label>
            <input id="boatName" required>

            <label>Location</label>
            <input id="location" required>

            <label>Owner Name</label>
            <input id="ownerName" required>

            <label>Registration Number</label>
            <input id="registrationNumber" required>

            <label>Mobile</label>
            <input id="mobile" required>

            <label>Email</label>
            <input id="email" type="email" required>

            <label>Subscription Active</label>
            <select id="subscriptionActive" required>
                <option value="">Select</option>
                <option>Yes</option>
                <option>No</option>
            </select>

            <label>Finish Date</label>
            <input id="finishDate" type="date" required>

            <label>Wireless No</label>
            <input id="wirelessNo" required>

            <button class="submit-btn">Submit</button>
            <p id="status"></p>
        </form>
    </div>
</div>

<!-- VIEW BOATS -->
<div id="viewBoats" class="page" style="display:none;">

    <div style="text-align:center; margin-top:20px;">
        <input id="search" placeholder="Search..." style="width:90%;max-width:400px;padding:10px;">
    </div>

    <div style="text-align:center; margin:15px;">
        <button class="submit-btn" onclick="exportToExcel()" style="max-width:300px;">
            Export to Excel
        </button>
    </div>

    <table id="boatTable">
        <thead>
            <tr>
                <th>Boat</th>
                <th>Location</th>
                <th>Owner</th>
                <th>Reg No</th>
                <th>Mobile</th>
                <th>Email</th>
                <th>Sub</th>
                <th>Finish</th>
                <th>Wireless</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
const firebaseConfig = {
    apiKey: "AIzaSyBgHSbR6Q_za_uSjxpNwfPGh2xx4QSYpEY",
    authDomain: "orcadofish.firebaseapp.com",
    databaseURL: "https://orcadofish-default-rtdb.firebaseio.com",
    projectId: "orcadofish"
};
firebase.initializeApp(firebaseConfig);

const database = firebase.database();
const tableBody = document.getElementById("tableBody");

/* Navigation */
function showPage(id) {
    document.querySelectorAll(".page").forEach(p => p.style.display = "none");
    document.getElementById(id).style.display = "block";
}

/* Submit */
document.getElementById("boatForm").addEventListener("submit", e => {
    e.preventDefault();

    const data = {
        boatName: boatName.value,
        location: location.value,
        ownerName: ownerName.value,
        registrationNumber: registrationNumber.value,
        mobile: mobile.value,
        email: email.value,
        subscriptionActive: subscriptionActive.value,
        finishDate: finishDate.value,
        wirelessNo: wirelessNo.value
    };

    database.ref("boats").push(data);
    status.innerHTML = "âœ… Saved Successfully";
    e.target.reset();
});

/* Load Table */
database.ref("boats").on("value", snap => {
    tableBody.innerHTML = "";
    snap.forEach(c => {
        const d = c.val();
        tableBody.innerHTML += `
        <tr>
            <td>${d.boatName}</td>
            <td>${d.location}</td>
            <td>${d.ownerName}</td>
            <td>${d.registrationNumber}</td>
            <td>${d.mobile}</td>
            <td>${d.email}</td>
            <td>${d.subscriptionActive}</td>
            <td>${d.finishDate}</td>
            <td>${d.wirelessNo}</td>
        </tr>`;
    });
});

/* Search */
search.addEventListener("keyup", () => {
    const v = search.value.toLowerCase();
    document.querySelectorAll("#boatTable tbody tr").forEach(r => {
        r.style.display = r.innerText.toLowerCase().includes(v) ? "" : "none";
    });
});

/* Export */
function exportToExcel() {
    let csv = [];
    for (let r of boatTable.rows) {
        let row = [];
        for (let c of r.cells) row.push(`"${c.innerText}"`);
        csv.push(row.join(","));
    }
    const blob = new Blob([csv.join("\n")], {type:"text/csv"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "boats_data.csv";
    a.click();
}
</script>

</body>
</html>
