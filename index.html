<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Orcado Fish</title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    font-family: 'Roboto', sans-serif;
    background: linear-gradient(to bottom, #b3e5fc, #81d4fa);
}

/* NAVBAR */
nav {
    display: flex;
    justify-content: center;
    background: #007BFF;
    padding: 15px;
}
nav a {
    margin: 0 20px;
    color: white;
    font-weight: bold;
    cursor: pointer;
}

/* HERO */
header {
    text-align: center;
    padding: 80px 20px;
    background: linear-gradient(135deg, #00cfff, #007bff);
    color: white;
}
header .logo { width: 130px; }

/* FORM */
.container {
    background: white;
    max-width: 600px;
    margin: 40px auto;
    padding: 30px;
    border-radius: 15px;
}
label { font-weight: bold; margin-top: 12px; display: block; }
input, select, button {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
}
button {
    background: #007BFF;
    color: white;
    font-weight: bold;
    border: none;
    border-radius: 20px;
    margin-top: 20px;
    cursor: pointer;
}

/* TABLE */
#boatTable {
    width: 95%;
    max-width: 1100px;
    margin: 30px auto;
    border-collapse: collapse;
    background: white;
}
#boatTable th, #boatTable td {
    padding: 10px;
    border: 1px solid #ddd;
    text-align: center;
}
#boatTable th {
    background: #007BFF;
    color: white;
}
#boatTable tr:nth-child(even) { background: #f2f2f2; }
</style>
</head>

<body>

<!-- NAV -->
<nav>
    <a onclick="showPage('home')">Home</a>
    <a onclick="showPage('addBoat')">Add Boat</a>
    <a onclick="showPage('viewBoats')">View Boats</a>
</nav>

<!-- HOME -->
<div id="home" class="page">
    <header>
        <img src="logo.png" class="logo">
        <h1>Orcado Fish</h1>
        <p>Manage Your Boats Effortlessly</p>
    </header>
</div>

<!-- ADD BOAT -->
<div id="addBoat" class="page" style="display:none;">
    <div class="container">
        <form id="boatForm">
            <label>Boat Name</label>
            <input id="boatName" required>

            <label>Location</label>
            <input id="location" required>

            <label>Boat Owner Name</label>
            <input id="ownerName" required>

            <label>Boat Registration Number</label>
            <input id="registrationNumber" required>

            <label>Mobile No</label>
            <input id="mobile" required>

            <label>Email ID</label>
            <input id="email" type="email" required>

            <label>Subscription Active</label>
            <select id="subscriptionActive" required>
                <option value="">Select</option>
                <option>Yes</option>
                <option>No</option>
            </select>

            <label>Subscription Finish Date</label>
            <input id="finishDate" type="date" required>

            <label>Wireless No</label>
            <input id="wirelessNo" required>

            <button type="submit">Submit</button>
            <p id="status"></p>
        </form>
    </div>
</div>

<!-- VIEW BOATS -->
<div id="viewBoats" class="page" style="display:none;">

    <div style="text-align:center;margin-top:20px;">
        <input id="search" placeholder="Search any field..." style="width:90%;max-width:400px;padding:10px;">
    </div>

    <div style="text-align:center;margin:15px;">
        <button onclick="exportToExcel()">Export to Excel</button>
    </div>

    <table id="boatTable">
        <thead>
            <tr>
                <th>Boat Name</th>
                <th>Location</th>
                <th>Boat Owner Name</th>
                <th>Boat Registration Number</th>
                <th>Mobile No</th>
                <th>Email ID</th>
                <th>Subscription Active</th>
                <th>Subscription Finish Date</th>
                <th>Wireless No</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
const firebaseConfig = {
    apiKey: "AIzaSyBgHSbR6Q_za_uSjxpNwfPGh2xx4QSYpEY",
    authDomain: "orcadofish.firebaseapp.com",
    databaseURL: "https://orcadofish-default-rtdb.firebaseio.com",
    projectId: "orcadofish"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function showPage(id){
    document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
    document.getElementById(id).style.display = 'block';
}

boatForm.addEventListener("submit", e => {
    e.preventDefault();
    db.ref("boats").push({
        boatName: boatName.value,
        location: location.value,
        ownerName: ownerName.value,
        registrationNumber: registrationNumber.value,
        mobile: mobile.value,
        email: email.value,
        subscriptionActive: subscriptionActive.value,
        finishDate: finishDate.value,
        wirelessNo: wirelessNo.value
    });
    status.innerHTML = "âœ… Data Saved";
    e.target.reset();
});

db.ref("boats").on("value", snap => {
    tableBody.innerHTML = "";
    snap.forEach(c => {
        const d = c.val();
        tableBody.innerHTML += `
        <tr>
            <td>${d.boatName}</td>
            <td>${d.location}</td>
            <td>${d.ownerName}</td>
            <td>${d.registrationNumber}</td>
            <td>${d.mobile}</td>
            <td>${d.email}</td>
            <td>${d.subscriptionActive}</td>
            <td>${d.finishDate}</td>
            <td>${d.wirelessNo}</td>
        </tr>`;
    });
});

search.addEventListener("keyup", () => {
    const v = search.value.toLowerCase();
    document.querySelectorAll("#boatTable tbody tr").forEach(r => {
        r.style.display = r.innerText.toLowerCase().includes(v) ? "" : "none";
    });
});

function exportToExcel(){
    let csv = [];
    for (let row of boatTable.rows) {
        let cols = [];
        for (let cell of row.cells) cols.push(`"${cell.innerText}"`);
        csv.push(cols.join(","));
    }
    const blob = new Blob([csv.join("\n")], {type:"text/csv"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "boats_data.csv";
    a.click();
}
</script>

</body>
</html>
